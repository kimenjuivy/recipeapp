const nigerianRecipes = [
    {
        name: "Jollof Rice",
        image: "assets/senegal/jollof_rice.jpg",
        description: "A flavorful West African rice dish cooked with tomatoes, spices, and vegetables.",
        ingredients: [
            "2 cups long-grain parboiled rice",
            "1 onion, chopped",
            "2 tomatoes, blended",
            "1 red bell pepper, blended",
            "1 green bell pepper, chopped",
            "2 cloves garlic, minced",
            "1/4 cup vegetable oil",
            "1 tsp thyme",
            "1 tsp curry powder",
            "1 tsp paprika",
            "Salt and pepper to taste",
            "1 cup chicken or vegetable broth",
            "Chicken, shrimp, or vegetables (optional)",
        ],
        instructions: [
            "Heat the vegetable oil in a large pot over medium heat.",
            "Add the chopped onions and minced garlic, and sauté until translucent.",
            "Add the blended tomatoes and bell peppers, and cook until the mixture thickens.",
            "Stir in the thyme, curry powder, paprika, salt, and pepper.",
            "Add the rice and stir to coat it with the tomato mixture.",
            "Pour in the broth and bring to a boil.",
            "Reduce the heat to low, cover, and simmer until the rice is cooked and fluffy.",
            "If adding chicken, shrimp, or vegetables, add them halfway through cooking.",
            "Serve hot."
        ]
    },
    {
        name: "Yassa",
        image: "assets/senegal/yassa.jpg",
        description: "A Senegalese dish of marinated chicken or fish grilled and served with a tangy onion sauce.",
        ingredients: [
            "1 whole chicken, cut into pieces (or fish fillets)",
            "4 onions, sliced",
            "4 cloves garlic, minced",
            "Juice of 2-3 lemons",
            "1/4 cup vegetable oil",
            "2 tbsp Dijon mustard",
            "1 tbsp vinegar",
            "1 tsp thyme",
            "Salt and pepper to taste",
            "Chopped parsley for garnish",
            "Cooked rice or couscous for serving"
        ],
        instructions: [
            "In a bowl, mix the lemon juice, vegetable oil, Dijon mustard, vinegar, thyme, salt, and pepper.",
            "Marinate the chicken pieces (or fish fillets) in this mixture for at least 1 hour.",
            "Heat a grill or grill pan over medium-high heat.",
            "Grill the chicken or fish until cooked through and slightly charred.",
            "In a separate pan, sauté the sliced onions and minced garlic until soft and golden brown.",
            "Serve the grilled chicken or fish hot with the sautéed onions and parsley garnish, accompanied by rice or couscous."
        ]
    },
    {
        name: "Thiébou Yapp",
        image: "assets/senegal/thiebou_yapp.jpg",
        description: "A Senegalese rice and lamb dish cooked in a flavorful tomato sauce with vegetables.",
        ingredients: [
            "1 kg lamb meat, cut into pieces",
            "2 cups long-grain rice",
            "4 tomatoes, blended",
            "1 onion, chopped",
            "2 carrots, diced",
            "1 eggplant, diced",
            "1/2 cabbage, chopped",
            "4 cups water or broth",
            "1/4 cup vegetable oil",
            "1 tsp thyme",
            "1 tsp ground ginger",
            "Salt and pepper to taste"
        ],
        instructions: [
            "In a large pot, heat the vegetable oil over medium heat.",
            "Add the chopped onions and sauté until translucent.",
            "Add the lamb pieces and brown on all sides.",
            "Stir in the blended tomatoes, thyme, ground ginger, salt, and pepper.",
            "Add the water or broth and bring to a boil.",
            "Add the diced carrots, eggplant, and chopped cabbage.",
            "Simmer for 30 minutes or until the vegetables are tender.",
            "Add the rice, stir well, cover, and cook until the rice is tender and the liquid is absorbed.",
            "Serve hot."
        ]
    },
    {
        name: "Capitaine à la Saint-Louisienne",
        image: "assets/senegal/capitaine_saint_louis.jpg",
        description: "A Senegalese dish of tilapia fish cooked in a spicy tomato and vegetable sauce.",
        ingredients: [
            "4 tilapia fish fillets",
            "4 tomatoes, blended",
            "2 onions, chopped",
            "2 carrots, sliced",
            "1 green bell pepper, sliced",
            "1/4 cup vegetable oil",
            "1 tbsp tomato paste",
            "1 tbsp ground red pepper",
            "1 tsp thyme",
            "Salt and pepper to taste"
        ],
        instructions: [
            "In a large pan, heat the vegetable oil over medium heat.",
            "Add the chopped onions and sauté until translucent.",
            "Add the blended tomatoes, tomato paste, ground red pepper, thyme, salt, and pepper.",
            "Simmer for 10 minutes, stirring occasionally.",
            "Add the tilapia fillets, carrots, and green bell pepper slices.",
            "Cover and simmer for another 15-20 minutes, or until the fish is cooked through and the sauce is thickened.",
            "Serve hot."
        ]
    },
    {
        name: "Ndambe",
        image: "assets/senegal/ndambe.jpg",
        description: "A popular Senegalese street food made from spiced black-eyed pea paste served with bread.",
        ingredients: [
            "2 cups black-eyed peas, soaked overnight",
            "2 onions, chopped",
            "2 tomatoes, chopped",
            "2 cloves garlic, minced",
            "2 tbsp vegetable oil",
            "1 tbsp tomato paste",
            "1 tsp cayenne pepper",
            "1 tsp ground cumin",
            "Salt to taste",
            "Baguette or bread for serving"
        ],
        instructions: [
            "Drain and rinse the soaked black-eyed peas.",
            "In a blender or food processor, blend the black-eyed peas with a little water until smooth.",
            "In a large pan, heat the vegetable oil over medium heat.",
            "Add the chopped onions and garlic, and sauté until translucent.",
            "Add the chopped tomatoes, tomato paste, cayenne pepper, ground cumin, and salt.",
            "Cook until the tomatoes are soft and the mixture thickens.",
            "Stir in the black-eyed pea paste and cook, stirring constantly, until heated through.",
            "Serve hot with baguette or bread."
        ]
    },
    {
        name: "Avocat au Crevettes",
        image: "assets/senegal/avocat_crevettes.jpg",
        description: "A Senegalese appetizer of avocado stuffed with marinated shrimp.",
        ingredients: [
            "2 ripe avocados",
            "200 g cooked shrimp, peeled and deveined",
            "1/4 cup mayonnaise",
            "1 tbsp lemon juice",
            "1/2 tsp paprika",
            "Salt and pepper to taste",
            "Lettuce leaves for serving"
        ],
        instructions: [
            "In a bowl, mix the cooked shrimp with mayonnaise, lemon juice, paprika, salt, and pepper.",
            "Cut the avocados in half and remove the pits.",
            "Fill each avocado half with the shrimp mixture.",
            "Serve on a bed of lettuce leaves."
        ]
    },
    {
        name: "Thiou à la Viande",
        image: "assets/senegal/thiou_viande.jpg",
        description: "A hearty Senegalese stew made with beef, vegetables, and a flavorful tomato sauce.",
        ingredients: [
            "500 g beef stew meat, cubed",
            "2 onions, chopped",
            "4 tomatoes, blended",
            "2 carrots, diced",
            "2 potatoes, diced",
            "1 eggplant, diced",
            "1/2 cabbage, chopped",
            "4 cups water or broth",
            "1/4 cup vegetable oil",
            "1 tsp thyme",
            "1 tsp ground ginger",
            "Salt and pepper to taste"
        ],
        instructions: [
            "In a large pot, heat the vegetable oil over medium heat.",
            "Add the chopped onions and sauté until translucent.",
            "Add the beef stew meat and brown on all sides.",
            "Stir in the blended tomatoes, thyme, ground ginger, salt, and pepper.",
            "Add the water or broth and bring to a boil.",
            "Add the diced carrots, potatoes, eggplant, and chopped cabbage.",
            "Simmer for 30 minutes or until the vegetables are tender and the beef is cooked through.",
            "Serve hot."
        ]
    },
    {
        name: "Mulet Farci à la Saint-Louisienne",
        image: "assets/senegal/mulet_farci.jpg",
        description: "A Senegalese dish of stuffed mullet fish baked with a flavorful vegetable filling.",    
    ingredients: [
        "4 mullet fish, cleaned and gutted",
        "2 onions, chopped",
        "2 tomatoes, chopped",
        "1 green bell pepper, chopped",
        "1/4 cup vegetable oil",
        "1/2 cup breadcrumbs",
        "1/2 cup grated cheese (optional)",
        "1 tbsp parsley, chopped",
        "1 tbsp lemon juice",
        "Salt and pepper to taste"
    ],
    instructions: [
        "Preheat the oven to 180°C (350°F).",
        "In a pan, heat the vegetable oil over medium heat.",
        "Add the chopped onions and sauté until translucent.",
        "Add the chopped tomatoes and green bell pepper, and cook until softened.",
        "Stir in the breadcrumbs, grated cheese (if using), parsley, lemon juice, salt, and pepper.",
        "Stuff each mullet fish with the vegetable mixture.",
        "Place the stuffed fish in a baking dish, cover with foil, and bake for 20-25 minutes, or until the fish is cooked through.",
        "Serve hot."
    ]
},
{
    name: "Bassi-Salté",
    image: "assets/senegal/bassi_salte.jpg",
    description: "A Senegalese dish of marinated grilled fish served with a tangy sauce.",
    ingredients: [
        "4 fish fillets (such as tilapia or sea bass)",
        "4 onions, sliced",
        "4 tomatoes, chopped",
        "2 tbsp vegetable oil",
        "1 lemon, juiced",
        "1 tsp ground black pepper",
        "1 tsp ground red pepper",
        "Salt to taste"
    ],
    instructions: [
        "In a bowl, mix the sliced onions, chopped tomatoes, vegetable oil, lemon juice, ground black pepper, ground red pepper, and salt.",
        "Marinate the fish fillets in this mixture for at least 1 hour.",
        "Heat a grill or grill pan over medium-high heat.",
        "Grill the fish fillets for about 5-7 minutes on each side, or until cooked through.",
        "Serve hot with the marinated onions and tomatoes."
    ]
},
{
    name: "Salatu Niebe",
    image: "assets/senegal/salatu_niebe.jpg",
    description: "A Senegalese black-eyed pea salad with tomatoes, onions, and a tangy vinaigrette.",
    ingredients: [
        "2 cups cooked black-eyed peas",
        "1 onion, finely chopped",
        "2 tomatoes, chopped",
        "1 green bell pepper, chopped",
        "1/4 cup parsley, chopped",
        "2 tbsp olive oil",
        "2 tbsp lemon juice",
        "1 tsp Dijon mustard",
        "Salt and pepper to taste"
    ],
    instructions: [
        "In a large bowl, combine the black-eyed peas, chopped onion, chopped tomatoes, chopped green bell pepper, and chopped parsley.",
        "In a small bowl, whisk together the olive oil, lemon juice, Dijon mustard, salt, and pepper.",
        "Pour the dressing over the salad and toss gently to combine.",
        "Chill in the refrigerator for at least 30 minutes before serving."
    ]
},
{
    name: "Banana Glacé",
    image: "assets/senegal/banana_glace.jpg",
    description: "A Senegalese dessert of caramelized bananas served with vanilla ice cream.",
    ingredients: [
        "4 ripe bananas",
        "1/4 cup brown sugar",
        "2 tbsp butter",
        "1/4 cup rum (optional)",
        "Vanilla ice cream for serving"
    ],
    instructions: [
        "Peel the bananas and cut them in half lengthwise.",
        "In a pan, melt the butter over medium heat.",
        "Add the brown sugar and stir until it dissolves and caramelizes.",
        "Add the bananas to the caramelized sugar and cook for 2-3 minutes on each side, until golden brown and caramelized.",
        "If using rum, carefully add it to the pan and ignite with a match to flambé (optional).",
        "Serve the caramelized bananas hot with vanilla ice cream."
    ]
},
{
    name: "Cinq Centimes",
    image: "assets/senegal/cinq_centimes.jpg",
    description: "A Senegalese snack of fried plantains with a spicy peanut sauce.",
    ingredients: [
        "2 ripe plantains",
        "1/4 cup peanut butter",
        "1/4 cup water",
        "1 tsp cayenne pepper",
        "Salt to taste",
        "Vegetable oil for frying"
    ],
    instructions: [
        "Peel the plantains and cut them into slices.",
        "In a bowl, mix the peanut butter with water until smooth.",
        "Add cayenne pepper and salt to taste, adjusting the thickness with water if needed.",
        "Heat vegetable oil in a frying pan over medium-high heat.",
        "Fry the plantain slices until golden brown on both sides.",
        "Drain on paper towels to remove excess oil.",
        "Serve hot with the spicy peanut sauce."
    ]
},
{
    name: "Sombi",
    image: "assets/senegal/sombi.jpg",
    description: "A Senegalese coconut rice pudding flavored with vanilla and served chilled.",
    ingredients: [
        "1 cup rice",
        "4 cups coconut milk",
        "1/2 cup sugar",
        "1 tsp vanilla extract",
        "Ground nutmeg for garnish"
    ],
    instructions: [
        "In a pot, combine the rice, coconut milk, sugar, and vanilla extract.",
        "Bring to a boil over medium-high heat, then reduce heat to low.",
        "Simmer uncovered, stirring occasionally, until the rice is tender and the mixture thickens (about 30-40 minutes).",
        "Remove from heat and let cool to room temperature.",
        "Refrigerate until chilled.",
        "Serve cold, sprinkled with ground nutmeg."
    ]
},
{
    name: "Ngalakh",
    image: "assets/senegal/ngalakh.jpg",
    description: "A Senegalese dessert made from millet, peanut butter, and dried fruits, traditionally served during religious celebrations.",
    ingredients: [
        "1 cup millet",
        "4 cups water",
        "1 cup peanut butter",
        "1 cup sugar",
        "1/2 cup dried fruits (raisins, apricots, dates), chopped",
        "Ground nutmeg for garnish"
    ],
    instructions: [
        "In a pot, bring the water to a boil over medium-high heat.",
        "Add the millet and reduce heat to low.",
        "Simmer, covered, until the millet is tender and the water is absorbed (about 20-25 minutes).",
        "Stir in the peanut butter, sugar, and dried fruits.",
        "Cook, stirring constantly, until well combined and heated through (about 5-7 minutes).",
        "Remove from heat and let cool slightly.",
        "Serve warm or chilled, garnished with ground nutmeg."
    ]
},





    
    
    
    
    
];
function generateRecipeHTML(recipe) {
    const recipeElement = document.createElement('div');
    recipeElement.className = 'recipe-container';
    recipeElement.innerHTML = `
        <div class="recipe-image-container">
            <img src="${recipe.image}" alt="${recipe.name}">
        </div>
        <div class="recipe-content">
            <h3>${recipe.name}</h3>
            <p>${recipe.description}</p>
            <button class="view-recipe-btn">View Recipe</button>
            <div class="recipe-details" style="display: none;">
                <h4>Ingredients:</h4>
                <ul>${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}</ul>
                <h4>Instructions:</h4>
                <ol>${recipe.instructions.map(inst => `<li>${inst}</li>`).join('')}</ol>
                <button onclick="downloadRecipe('${recipe.name}')">Download Recipe as PDF</button>
            </div>
        </div>
    `;
    return recipeElement;
}

function downloadRecipe(recipeName) {
    const recipe = nigerianRecipes.find(r => r.name === recipeName);
    
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Set the title
    doc.setFontSize(24);
    doc.setTextColor(244, 164, 96); // A nice orange color
    doc.text(recipe.name, 105, 20, null, null, 'center');

    // Add the image
    try {
        const imgData = getBase64Image(recipe.image);
        doc.addImage(imgData, 'JPEG', 15, 30, 180, 100);
    } catch (error) {
        console.error('Error adding image to PDF:', error);
    }

    // Add ingredients
    doc.setFontSize(16);
    doc.setTextColor(0, 0, 0);
    doc.text('Ingredients:', 15, 140);

    doc.autoTable({
        startY: 145,
        head: [['Ingredients']],
        body: recipe.ingredients.map(ing => [ing]),
        theme: 'striped',
        headStyles: { fillColor: [244, 164, 96], textColor: 255 },
        margin: { left: 15, right: 15 },
    });

    // Add instructions
    let finalY = doc.lastAutoTable.finalY || 145;
    doc.setFontSize(16);
    doc.text('Instructions:', 15, finalY + 10);

    doc.autoTable({
        startY: finalY + 15,
        head: [['Step', 'Instruction']],
        body: recipe.instructions.map((inst, index) => [index + 1, inst]),
        theme: 'striped',
        headStyles: { fillColor: [244, 164, 96], textColor: 255 },
        margin: { left: 15, right: 15 },
    });

    doc.save(`${recipe.name}.pdf`);
}

function getBase64Image(imgUrl) {
    const img = new Image();
    img.crossOrigin = 'Anonymous';
    img.src = imgUrl;
    const canvas = document.createElement('canvas');
    canvas.width = img.width;
    canvas.height = img.height;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0);
    return canvas.toDataURL('image/jpeg');
}

document.addEventListener('DOMContentLoaded', () => {
    const recipesSection = document.getElementById('recipes');
    nigerianRecipes.forEach(recipe => {
        const recipeCard = generateRecipeHTML(recipe);
        recipesSection.appendChild(recipeCard);

        const viewRecipeBtn = recipeCard.querySelector('.view-recipe-btn');
        const recipeDetails = recipeCard.querySelector('.recipe-details');

        viewRecipeBtn.addEventListener('click', () => {
            if (recipeDetails.style.display === 'none') {
                recipeDetails.style.display = 'block';
                viewRecipeBtn.textContent = 'Hide Recipe';
            } else {
                recipeDetails.style.display = 'none';
                viewRecipeBtn.textContent = 'View Recipe';
            }
        });
    });
});